# Дебаг

Это третья подзадача [домашнего задания про рейтрейсер](../raytracer). В рамках этой задачи вам нужно реализовать упрощенные режимы работы рейтрейсера, которые помогут вам отловить основные ошибки при работе с камерой, трейсинге лучей и реализации геометрии.

Прочитайте описание основного задания перед выполнением этого. Здесь вам нужно реализовать поддержку режимов `RenderMode::kDepth` и `RenderMode::kNormal`. **Обратите внимание**, что реализация должна быть выполнена в рамках общей задачи `raytracer` (т.е. вы не пишите отдельное решение в этой задаче).

Для сдачи задания поменяйте содержимое файла `stub.txt` и отправьте эти изменения в свой удалённый репозиторий.

### Depth

В режиме `RenderMode::kDepth` при трейсинге луча результирующим цветом пикселя будет расстояние до ближайшего объекта, в который попал луч. Пусть при испускании луча из камеры через очередной пиксель этот луч попадает в объект на расстоянии $`\mathrm{d}`$. Тогда результирующим значением для этого пикселя будет тройка $`\mathrm{(d, d, d)}`$. **Обратите внимание**, что в итоге для записи изображения все значения нужно привести в диапазон $`\mathrm{[0, 1]}`$. Для этого:

* Там, где луч не пересекает сцену, используйте значение $`\mathrm{(1, 1, 1)}`$.
* Пусть максимальное расстояние по всем объектам при рейтрейсинге составило $`\mathrm{D}`$. Тогда итоговым значением для пикселя будет тройка $`\mathrm{(\frac{d}{D}, \frac{d}{D}, \frac{d}{D})}`$.

### Normal

В режиме `RenderMode::kNormal` при трейсинге луча результирующим цветом будет значение нормали в точке пересечения луча с ближайшим объектом. При этом нормаль должна быть направлена в **противоположную лучу** сторону. Поскольку вектор нормали нормирован, то все координаты будут в диапазоне $`\mathrm{[-1, 1]}`$. Для отображения изображения их нужно привести в диапазон $`\mathrm{[0, 1]}`$. Для этого:

* Там, где луч не пересекает сцену, используйте значение $`\mathrm{(0, 0, 0)}`$ в качестве результата.
* Пусть очередной вектор нормали получился равным $`\mathrm{\bar v}`$. Тогда в качестве результата используйте $`\mathrm{\frac{1}{2}\bar v + \frac{1}{2}}`$.
